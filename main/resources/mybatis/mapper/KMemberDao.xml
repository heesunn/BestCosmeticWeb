<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.study.springboot.member.dao.KMemberDao">

    <select id="googleCheck" resultType="com.study.springboot.member.dto.MemberDto">
    	select * from bc_member where bcm_googleid = #{param1}
    </select>
    <select id="facebookCheck" resultType="com.study.springboot.member.dto.MemberDto">
    	select * from bc_member where bcm_facebookid = #{param1}
    </select>
    <select id="kakaoCheck" resultType="com.study.springboot.member.dto.MemberDto">
    	select * from bc_member where bcm_kakaoid = #{param1}
    </select>
    <select id="naverCheck" resultType="com.study.springboot.member.dto.MemberDto">
    	select * from bc_member where bcm_naverid = #{param1}
    </select>
    <insert id="googleJoin">
    	insert into bc_member
            (bcm_num , bcm_id , bcm_pw , bcm_name , bcm_email, bcm_googleid, bcm_naverid, bcm_kakaoid, bcm_facebookid,
             bcm_zipcode,bcm_address1,bcm_address2,bcm_address3,bcm_address4,bcm_phonenum1,bcm_phonenum2,bcm_phonenum3,
             bcm_authority,bcm_enable,bcm_joined_on,bcm_stopdate)
            values ( bcm_num_seq.nextval , '' , '' , #{param2} , #{param3} , #{param1}, '','','','','','','','','','',
                    '','role_user','true',sysdate,sysdate)
    </insert>
    <insert id="facebookJoin">
    	insert into bc_member
            (bcm_num , bcm_id , bcm_pw , bcm_name , bcm_email, bcm_googleid, bcm_naverid, bcm_kakaoid, bcm_facebookid,
             bcm_zipcode,bcm_address1,bcm_address2,bcm_address3,bcm_address4,bcm_phonenum1,bcm_phonenum2,bcm_phonenum3,
             bcm_authority,bcm_enable,bcm_joined_on,bcm_stopdate)
            values ( bcm_num_seq.nextval , '' , '' , #{param2} , #{param3} , '', '','',#{param1},'','','','','','','',
                    '','role_user','true',sysdate,sysdate)
    </insert>
    <insert id="kakaoJoin">
    	insert into bc_member
            (bcm_num , bcm_id , bcm_pw , bcm_name , bcm_email, bcm_googleid, bcm_naverid, bcm_kakaoid, bcm_facebookid,
             bcm_zipcode,bcm_address1,bcm_address2,bcm_address3,bcm_address4,bcm_phonenum1,bcm_phonenum2,bcm_phonenum3,
             bcm_authority,bcm_enable,bcm_joined_on,bcm_stopdate)
            values ( bcm_num_seq.nextval , '' , '' , #{param2} , #{param3} , '', '',#{param1},'','','','','','','','',
                    '','role_user','true',sysdate,sysdate)
    </insert>
    <insert id="naverJoin">
    	insert into bc_member
            (bcm_num , bcm_id , bcm_pw , bcm_name , bcm_email, bcm_googleid, bcm_naverid, bcm_kakaoid, bcm_facebookid,
             bcm_zipcode,bcm_address1,bcm_address2,bcm_address3,bcm_address4,bcm_phonenum1,bcm_phonenum2,bcm_phonenum3,
             bcm_authority,bcm_enable,bcm_joined_on,bcm_stopdate)
            values ( bcm_num_seq.nextval , '' , '' , #{param2} , #{param3} , '', #{param1},'','','','','','','','','',
                    '','role_user','true',sysdate,sysdate)
    </insert>
    <select id="memberSession" resultType="com.study.springboot.member.dto.MemberDto">
    	select * from bc_member where bcm_id = #{param1}
    </select>
</mapper>

<!--
1.sql 문 뒤에 세미콜론 절대 들어가면 안된다.
2.여기서 사용한 컬럼명으로 DTO(Value Object)의 필드명을 만들어야 한다.
3.select a.dno, b.dno 등의 경우 컬럼명에 alias를 사용하지 않으면 문제가 생김
4.ResultMap vs VO : VO가 더 빠르다.
    "iBatis 개발진에서 VO을 권장한다.
    왜냐하면 Map은 (iBatis에서 ) 수치상 훨씬 느리다고 한다.
 -->